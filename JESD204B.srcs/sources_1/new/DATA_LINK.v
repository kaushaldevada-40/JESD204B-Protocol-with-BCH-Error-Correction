`timescale 1ns / 1ps
//////////////////////////////////////////////////////////////////////////////////
// Company: 
// Engineer: 
// 
// Create Date: 05/23/2025 12:31:37 PM
// Design Name: 
// Module Name: DATA_LINK
// Project Name: 
// Target Devices: 
// Tool Versions: 
// Description: 
// 
// Dependencies: 
// 
// Revision:
// Revision 0.01 - File Created
// Additional Comments:
// 
//////////////////////////////////////////////////////////////////////////////////


module DATA_LINK(
    input [7:0] dl_data_in1,
    input sync,
    input rst,
    input fc,
    output reg [9:0] dl_data_out1
    );
    
    `define R 8'h1c
    `define A 8'h7c
    `define Q 8'h9c
    `define K 8'hbc
    `define F 8'hfc
    
    parameter WAIT=2'b00;
    parameter CGS=2'b01;
    parameter ILAS=2'b10;
    parameter DATA=2'b11;
    
    //Configuration parameters
    parameter DID=8'h00;
    parameter ADJCNT=4'b1111;
    parameter BID=4'b0000;
    parameter ADJDIR=1'b0;
    parameter PHADJ=1'b0;
    parameter LID=5'b00000;
    parameter SCR=1'b0;
    parameter L=5'b10111;
    parameter F=8'b11011111;
    parameter K=5'b11001;
    parameter M=8'b11001100;
    parameter CS=2'b00;
    parameter N=5'b00000;
    parameter SUBCLASS=3'b000;
    parameter JESDV=3'b000;
    parameter S=5'b10101;
    parameter HD=1'b0;
    parameter CF=5'b00000;
    parameter FCHK=8'b00000;
    
    reg [9:0] rom [0:511];
    initial begin
rom[9'h000] = 10'b1001110100;
rom[9'h001] = 10'b0111010100;
rom[9'h002] = 10'b1011010100;
rom[9'h003] = 10'b1100011011;
rom[9'h004] = 10'b1101010100;
rom[9'h005] = 10'b1010011011;
rom[9'h006] = 10'b0110011011;
rom[9'h007] = 10'b1110001011;
rom[9'h008] = 10'b1110010100;
rom[9'h009] = 10'b1001011011;
rom[9'h00a] = 10'b0101011011;
rom[9'h00b] = 10'b1101001011;
rom[9'h00c] = 10'b0011011011;
rom[9'h00d] = 10'b1011001011;
rom[9'h00e] = 10'b0111001011;
rom[9'h00f] = 10'b0101110100;
rom[9'h010] = 10'b0110110100;
rom[9'h011] = 10'b1000111011;
rom[9'h012] = 10'b0100111011;
rom[9'h013] = 10'b1100101011;
rom[9'h014] = 10'b0010111011;
rom[9'h015] = 10'b1010101011;
rom[9'h016] = 10'b0110101011;
rom[9'h017] = 10'b1110100100;
rom[9'h018] = 10'b1100110100;
rom[9'h019] = 10'b1001101011;
rom[9'h01a] = 10'b0101101011;
rom[9'h01b] = 10'b1101100100;
rom[9'h01c] = 10'b0011101011;
rom[9'h01d] = 10'b1011100100;
rom[9'h01e] = 10'b0111100100;
rom[9'h01f] = 10'b1010110100;
rom[9'h020] = 10'b1001111001;
rom[9'h021] = 10'b0111011001;
rom[9'h022] = 10'b1011011001;
rom[9'h023] = 10'b1100011001;
rom[9'h024] = 10'b1101011001;
rom[9'h025] = 10'b1010011001;
rom[9'h026] = 10'b0110011001;
rom[9'h027] = 10'b1110001001;
rom[9'h028] = 10'b1110011001;
rom[9'h029] = 10'b1001011001;
rom[9'h02a] = 10'b0101011001;
rom[9'h02b] = 10'b1101001001;
rom[9'h02c] = 10'b0011011001;
rom[9'h02d] = 10'b1011001001;
rom[9'h02e] = 10'b0111001001;
rom[9'h02f] = 10'b0101111001;
rom[9'h030] = 10'b0110111001;
rom[9'h031] = 10'b1000111001;
rom[9'h032] = 10'b0100111001;
rom[9'h033] = 10'b1100101001;
rom[9'h034] = 10'b0010111001;
rom[9'h035] = 10'b1010101001;
rom[9'h036] = 10'b0110101001;
rom[9'h037] = 10'b1110101001;
rom[9'h038] = 10'b1100111001;
rom[9'h039] = 10'b1001101001;
rom[9'h03a] = 10'b0101101001;
rom[9'h03b] = 10'b1101101001;
rom[9'h03c] = 10'b0011101001;
rom[9'h03d] = 10'b1011101001;
rom[9'h03e] = 10'b0111101001;
rom[9'h03f] = 10'b1010111001;
rom[9'h040] = 10'b1001110101;
rom[9'h041] = 10'b0111010101;
rom[9'h042] = 10'b1011010101;
rom[9'h043] = 10'b1100010101;
rom[9'h044] = 10'b1101010101;
rom[9'h045] = 10'b1010010101;
rom[9'h046] = 10'b0110010101;
rom[9'h047] = 10'b1110000101;
rom[9'h048] = 10'b1110010101;
rom[9'h049] = 10'b1001010101;
rom[9'h04a] = 10'b0101010101;
rom[9'h04b] = 10'b1101000101;
rom[9'h04c] = 10'b0011010101;
rom[9'h04d] = 10'b1011000101;
rom[9'h04e] = 10'b0111000101;
rom[9'h04f] = 10'b0101110101;
rom[9'h050] = 10'b0110110101;
rom[9'h051] = 10'b1000110101;
rom[9'h052] = 10'b0100110101;
rom[9'h053] = 10'b1100100101;
rom[9'h054] = 10'b0010110101;
rom[9'h055] = 10'b1010100101;
rom[9'h056] = 10'b0110100101;
rom[9'h057] = 10'b1110100101;
rom[9'h058] = 10'b1100110101;
rom[9'h059] = 10'b1001100101;
rom[9'h05a] = 10'b0101100101;
rom[9'h05b] = 10'b1101100101;
rom[9'h05c] = 10'b0011100101;
rom[9'h05d] = 10'b1011100101;
rom[9'h05e] = 10'b0111100101;
rom[9'h05f] = 10'b1010110101;
rom[9'h060] = 10'b1001110011;
rom[9'h061] = 10'b0111010011;
rom[9'h062] = 10'b1011010011;
rom[9'h063] = 10'b1100011100;
rom[9'h064] = 10'b1101010011;
rom[9'h065] = 10'b1010011100;
rom[9'h066] = 10'b0110011100;
rom[9'h067] = 10'b1110001100;
rom[9'h068] = 10'b1110010011;
rom[9'h069] = 10'b1001011100;
rom[9'h06a] = 10'b0101011100;
rom[9'h06b] = 10'b1101001100;
rom[9'h06c] = 10'b0011011100;
rom[9'h06d] = 10'b1011001100;
rom[9'h06e] = 10'b0111001100;
rom[9'h06f] = 10'b0101110011;
rom[9'h070] = 10'b0110110011;
rom[9'h071] = 10'b1000111100;
rom[9'h072] = 10'b0100111100;
rom[9'h073] = 10'b1100101100;
rom[9'h074] = 10'b0010111100;
rom[9'h075] = 10'b1010101100;
rom[9'h076] = 10'b0110101100;
rom[9'h077] = 10'b1110100011;
rom[9'h078] = 10'b1100110011;
rom[9'h079] = 10'b1001101100;
rom[9'h07a] = 10'b0101101100;
rom[9'h07b] = 10'b1101100011;
rom[9'h07c] = 10'b0011101100;
rom[9'h07d] = 10'b1011100011;
rom[9'h07e] = 10'b0111100011;
rom[9'h07f] = 10'b1010110011;
rom[9'h080] = 10'b1001110010;
rom[9'h081] = 10'b0111010010;
rom[9'h082] = 10'b1011010010;
rom[9'h083] = 10'b1100011101;
rom[9'h084] = 10'b1101010010;
rom[9'h085] = 10'b1010011101;
rom[9'h086] = 10'b0110011101;
rom[9'h087] = 10'b1110001101;
rom[9'h088] = 10'b1110010010;
rom[9'h089] = 10'b1001011101;
rom[9'h08a] = 10'b0101011101;
rom[9'h08b] = 10'b1101001101;
rom[9'h08c] = 10'b0011011101;
rom[9'h08d] = 10'b1011001101;
rom[9'h08e] = 10'b0111001101;
rom[9'h08f] = 10'b0101110010;
rom[9'h090] = 10'b0110110010;
rom[9'h091] = 10'b1000111101;
rom[9'h092] = 10'b0100111101;
rom[9'h093] = 10'b1100101101;
rom[9'h094] = 10'b0010111101;
rom[9'h095] = 10'b1010101101;
rom[9'h096] = 10'b0110101101;
rom[9'h097] = 10'b1110100010;
rom[9'h098] = 10'b1100110010;
rom[9'h099] = 10'b1001101101;
rom[9'h09a] = 10'b0101101101;
rom[9'h09b] = 10'b1101100010;
rom[9'h09c] = 10'b0011101101;
rom[9'h09d] = 10'b1011100010;
rom[9'h09e] = 10'b0111100010;
rom[9'h09f] = 10'b1010110010;
rom[9'h0a0] = 10'b1001111010;
rom[9'h0a1] = 10'b0111011010;
rom[9'h0a2] = 10'b1011011010;
rom[9'h0a3] = 10'b1100011010;
rom[9'h0a4] = 10'b1101011010;
rom[9'h0a5] = 10'b1010011010;
rom[9'h0a6] = 10'b0110011010;
rom[9'h0a7] = 10'b1110001010;
rom[9'h0a8] = 10'b1110011010;
rom[9'h0a9] = 10'b1001011010;
rom[9'h0aa] = 10'b0101011010;
rom[9'h0ab] = 10'b1101001010;
rom[9'h0ac] = 10'b0011011010;
rom[9'h0ad] = 10'b1011001010;
rom[9'h0ae] = 10'b0111001010;
rom[9'h0af] = 10'b0101111010;
rom[9'h0b0] = 10'b0110111010;
rom[9'h0b1] = 10'b1000111010;
rom[9'h0b2] = 10'b0100111010;
rom[9'h0b3] = 10'b1100101010;
rom[9'h0b4] = 10'b0010111010;
rom[9'h0b5] = 10'b1010101010;
rom[9'h0b6] = 10'b0110101010;
rom[9'h0b7] = 10'b1110101010;
rom[9'h0b8] = 10'b1100111010;
rom[9'h0b9] = 10'b1001101010;
rom[9'h0ba] = 10'b0101101010;
rom[9'h0bb] = 10'b1101101010;
rom[9'h0bc] = 10'b0011101010;
rom[9'h0bd] = 10'b1011101010;
rom[9'h0be] = 10'b0111101010;
rom[9'h0bf] = 10'b1010111010;
rom[9'h0c0] = 10'b1001110110;
rom[9'h0c1] = 10'b0111010110;
rom[9'h0c2] = 10'b1011010110;
rom[9'h0c3] = 10'b1100010110;
rom[9'h0c4] = 10'b1101010110;
rom[9'h0c5] = 10'b1010010110;
rom[9'h0c6] = 10'b0110010110;
rom[9'h0c7] = 10'b1110000110;
rom[9'h0c8] = 10'b1110010110;
rom[9'h0c9] = 10'b1001010110;
rom[9'h0ca] = 10'b0101010110;
rom[9'h0cb] = 10'b1101000110;
rom[9'h0cc] = 10'b0011010110;
rom[9'h0cd] = 10'b1011000110;
rom[9'h0ce] = 10'b0111000110;
rom[9'h0cf] = 10'b0101110110;
rom[9'h0d0] = 10'b0110110110;
rom[9'h0d1] = 10'b1000110110;
rom[9'h0d2] = 10'b0100110110;
rom[9'h0d3] = 10'b1100100110;
rom[9'h0d4] = 10'b0010110110;
rom[9'h0d5] = 10'b1010100110;
rom[9'h0d6] = 10'b0110100110;
rom[9'h0d7] = 10'b1110100110;
rom[9'h0d8] = 10'b1100110110;
rom[9'h0d9] = 10'b1001100110;
rom[9'h0da] = 10'b0101100110;
rom[9'h0db] = 10'b1101100110;
rom[9'h0dc] = 10'b0011100110;
rom[9'h0dd] = 10'b1011100110;
rom[9'h0de] = 10'b0111100110;
rom[9'h0df] = 10'b1010110110;
rom[9'h0e0] = 10'b1001110001;
rom[9'h0e1] = 10'b0111010001;
rom[9'h0e2] = 10'b1011010001;
rom[9'h0e3] = 10'b1100011110;
rom[9'h0e4] = 10'b1101010001;
rom[9'h0e5] = 10'b1010011110;
rom[9'h0e6] = 10'b0110011110;
rom[9'h0e7] = 10'b1110001110;
rom[9'h0e8] = 10'b1110010001;
rom[9'h0e9] = 10'b1001011110;
rom[9'h0ea] = 10'b0101011110;
rom[9'h0eb] = 10'b1101001110;
rom[9'h0ec] = 10'b0011011110;
rom[9'h0ed] = 10'b1011001110;
rom[9'h0ee] = 10'b0111001110;
rom[9'h0ef] = 10'b0101110001;
rom[9'h0f0] = 10'b0110110001;
rom[9'h0f1] = 10'b1000110111;
rom[9'h0f2] = 10'b0100110111;
rom[9'h0f3] = 10'b1100101110;
rom[9'h0f4] = 10'b0010110111;
rom[9'h0f5] = 10'b1010101110;
rom[9'h0f6] = 10'b0110101110;
rom[9'h0f7] = 10'b1110100001;
rom[9'h0f8] = 10'b1100110001;
rom[9'h0f9] = 10'b1001101110;
rom[9'h0fa] = 10'b0101101110;
rom[9'h0fb] = 10'b1101100001;
rom[9'h0fc] = 10'b0011101110;
rom[9'h0fd] = 10'b1011100001;
rom[9'h0fe] = 10'b0111100001;
rom[9'h0ff] = 10'b1010110001;
rom[9'h100] = 10'b0000000000;
rom[9'h101] = 10'b0000000000;
rom[9'h102] = 10'b0000000000;
rom[9'h103] = 10'b0000000000;
rom[9'h104] = 10'b0000000000;
rom[9'h105] = 10'b0000000000;
rom[9'h106] = 10'b0000000000;
rom[9'h107] = 10'b0000000000;
rom[9'h108] = 10'b0000000000;
rom[9'h109] = 10'b0000000000;
rom[9'h10a] = 10'b0000000000;
rom[9'h10b] = 10'b0000000000;
rom[9'h10c] = 10'b0000000000;
rom[9'h10d] = 10'b0000000000;
rom[9'h10e] = 10'b0000000000;
rom[9'h10f] = 10'b0000000000;
rom[9'h110] = 10'b0000000000;
rom[9'h111] = 10'b0000000000;
rom[9'h112] = 10'b0000000000;
rom[9'h113] = 10'b0000000000;
rom[9'h114] = 10'b0000000000;
rom[9'h115] = 10'b0000000000;
rom[9'h116] = 10'b0000000000;
rom[9'h117] = 10'b0000000000;
rom[9'h118] = 10'b0000000000;
rom[9'h119] = 10'b0000000000;
rom[9'h11a] = 10'b0000000000;
rom[9'h11b] = 10'b0000000000;
rom[9'h11c] = 10'b0011110101;
rom[9'h11d] = 10'b0000000000;
rom[9'h11e] = 10'b0000000000;
rom[9'h11f] = 10'b0000000000;
rom[9'h120] = 10'b0000000000;
rom[9'h121] = 10'b0000000000;
rom[9'h122] = 10'b0000000000;
rom[9'h123] = 10'b0000000000;
rom[9'h124] = 10'b0000000000;
rom[9'h125] = 10'b0000000000;
rom[9'h126] = 10'b0000000000;
rom[9'h127] = 10'b0000000000;
rom[9'h128] = 10'b0000000000;
rom[9'h129] = 10'b0000000000;
rom[9'h12a] = 10'b0000000000;
rom[9'h12b] = 10'b0000000000;
rom[9'h12c] = 10'b0000000000;
rom[9'h12d] = 10'b0000000000;
rom[9'h12e] = 10'b0000000000;
rom[9'h12f] = 10'b0000000000;
rom[9'h130] = 10'b0000000000;
rom[9'h131] = 10'b0000000000;
rom[9'h132] = 10'b0000000000;
rom[9'h133] = 10'b0000000000;
rom[9'h134] = 10'b0000000000;
rom[9'h135] = 10'b0000000000;
rom[9'h136] = 10'b0000000000;
rom[9'h137] = 10'b0000000000;
rom[9'h138] = 10'b0000000000;
rom[9'h139] = 10'b0000000000;
rom[9'h13a] = 10'b0000000000;
rom[9'h13b] = 10'b0000000000;
rom[9'h13c] = 10'b0011111001;
rom[9'h13d] = 10'b0000000000;
rom[9'h13e] = 10'b0000000000;
rom[9'h13f] = 10'b0000000000;
rom[9'h140] = 10'b0000000000;
rom[9'h141] = 10'b0000000000;
rom[9'h142] = 10'b0000000000;
rom[9'h143] = 10'b0000000000;
rom[9'h144] = 10'b0000000000;
rom[9'h145] = 10'b0000000000;
rom[9'h146] = 10'b0000000000;
rom[9'h147] = 10'b0000000000;
rom[9'h148] = 10'b0000000000;
rom[9'h149] = 10'b0000000000;
rom[9'h14a] = 10'b0000000000;
rom[9'h14b] = 10'b0000000000;
rom[9'h14c] = 10'b0000000000;
rom[9'h14d] = 10'b0000000000;
rom[9'h14e] = 10'b0000000000;
rom[9'h14f] = 10'b0000000000;
rom[9'h150] = 10'b0000000000;
rom[9'h151] = 10'b0000000000;
rom[9'h152] = 10'b0000000000;
rom[9'h153] = 10'b0000000000;
rom[9'h154] = 10'b0000000000;
rom[9'h155] = 10'b0000000000;
rom[9'h156] = 10'b0000000000;
rom[9'h157] = 10'b0000000000;
rom[9'h158] = 10'b0000000000;
rom[9'h159] = 10'b0000000000;
rom[9'h15a] = 10'b0000000000;
rom[9'h15b] = 10'b0000000000;
rom[9'h15c] = 10'b0011110101;
rom[9'h15d] = 10'b0000000000;
rom[9'h15e] = 10'b0000000000;
rom[9'h15f] = 10'b0000000000;
rom[9'h160] = 10'b0000000000;
rom[9'h161] = 10'b0000000000;
rom[9'h162] = 10'b0000000000;
rom[9'h163] = 10'b0000000000;
rom[9'h164] = 10'b0000000000;
rom[9'h165] = 10'b0000000000;
rom[9'h166] = 10'b0000000000;
rom[9'h167] = 10'b0000000000;
rom[9'h168] = 10'b0000000000;
rom[9'h169] = 10'b0000000000;
rom[9'h16a] = 10'b0000000000;
rom[9'h16b] = 10'b0000000000;
rom[9'h16c] = 10'b0000000000;
rom[9'h16d] = 10'b0000000000;
rom[9'h16e] = 10'b0000000000;
rom[9'h16f] = 10'b0000000000;
rom[9'h170] = 10'b0000000000;
rom[9'h171] = 10'b0000000000;
rom[9'h172] = 10'b0000000000;
rom[9'h173] = 10'b0000000000;
rom[9'h174] = 10'b0000000000;
rom[9'h175] = 10'b0000000000;
rom[9'h176] = 10'b0000000000;
rom[9'h177] = 10'b0000000000;
rom[9'h178] = 10'b0000000000;
rom[9'h179] = 10'b0000000000;
rom[9'h17a] = 10'b0000000000;
rom[9'h17b] = 10'b0000000000;
rom[9'h17c] = 10'b0011110011;
rom[9'h17d] = 10'b0000000000;
rom[9'h17e] = 10'b0000000000;
rom[9'h17f] = 10'b0000000000;
rom[9'h180] = 10'b0000000000;
rom[9'h181] = 10'b0000000000;
rom[9'h182] = 10'b0000000000;
rom[9'h183] = 10'b0000000000;
rom[9'h184] = 10'b0000000000;
rom[9'h185] = 10'b0000000000;
rom[9'h186] = 10'b0000000000;
rom[9'h187] = 10'b0000000000;
rom[9'h188] = 10'b0000000000;
rom[9'h189] = 10'b0000000000;
rom[9'h18a] = 10'b0000000000;
rom[9'h18b] = 10'b0000000000;
rom[9'h18c] = 10'b0000000000;
rom[9'h18d] = 10'b0000000000;
rom[9'h18e] = 10'b0000000000;
rom[9'h18f] = 10'b0000000000;
rom[9'h190] = 10'b0000000000;
rom[9'h191] = 10'b0000000000;
rom[9'h192] = 10'b0000000000;
rom[9'h193] = 10'b0000000000;
rom[9'h194] = 10'b0000000000;
rom[9'h195] = 10'b0000000000;
rom[9'h196] = 10'b0000000000;
rom[9'h197] = 10'b0000000000;
rom[9'h198] = 10'b0000000000;
rom[9'h199] = 10'b0000000000;
rom[9'h19a] = 10'b0000000000;
rom[9'h19b] = 10'b0000000000;
rom[9'h19c] = 10'b0011110010;
rom[9'h19d] = 10'b0000000000;
rom[9'h19e] = 10'b0000000000;
rom[9'h19f] = 10'b0000000000;
rom[9'h1a0] = 10'b0000000000;
rom[9'h1a1] = 10'b0000000000;
rom[9'h1a2] = 10'b0000000000;
rom[9'h1a3] = 10'b0000000000;
rom[9'h1a4] = 10'b0000000000;
rom[9'h1a5] = 10'b0000000000;
rom[9'h1a6] = 10'b0000000000;
rom[9'h1a7] = 10'b0000000000;
rom[9'h1a8] = 10'b0000000000;
rom[9'h1a9] = 10'b0000000000;
rom[9'h1aa] = 10'b0000000000;
rom[9'h1ab] = 10'b0000000000;
rom[9'h1ac] = 10'b0000000000;
rom[9'h1ad] = 10'b0000000000;
rom[9'h1ae] = 10'b0000000000;
rom[9'h1af] = 10'b0000000000;
rom[9'h1b0] = 10'b0000000000;
rom[9'h1b1] = 10'b0000000000;
rom[9'h1b2] = 10'b0000000000;
rom[9'h1b3] = 10'b0000000000;
rom[9'h1b4] = 10'b0000000000;
rom[9'h1b5] = 10'b0000000000;
rom[9'h1b6] = 10'b0000000000;
rom[9'h1b7] = 10'b0000000000;
rom[9'h1b8] = 10'b0000000000;
rom[9'h1b9] = 10'b0000000000;
rom[9'h1ba] = 10'b0000000000;
rom[9'h1bb] = 10'b0000000000;
rom[9'h1bc] = 10'b0011111010;
rom[9'h1bd] = 10'b0000000000;
rom[9'h1be] = 10'b0000000000;
rom[9'h1bf] = 10'b0000000000;
rom[9'h1c0] = 10'b0000000000;
rom[9'h1c1] = 10'b0000000000;
rom[9'h1c2] = 10'b0000000000;
rom[9'h1c3] = 10'b0000000000;
rom[9'h1c4] = 10'b0000000000;
rom[9'h1c5] = 10'b0000000000;
rom[9'h1c6] = 10'b0000000000;
rom[9'h1c7] = 10'b0000000000;
rom[9'h1c8] = 10'b0000000000;
rom[9'h1c9] = 10'b0000000000;
rom[9'h1ca] = 10'b0000000000;
rom[9'h1cb] = 10'b0000000000;
rom[9'h1cc] = 10'b0000000000;
rom[9'h1cd] = 10'b0000000000;
rom[9'h1ce] = 10'b0000000000;
rom[9'h1cf] = 10'b0000000000;
rom[9'h1d0] = 10'b0000000000;
rom[9'h1d1] = 10'b0000000000;
rom[9'h1d2] = 10'b0000000000;
rom[9'h1d3] = 10'b0000000000;
rom[9'h1d4] = 10'b0000000000;
rom[9'h1d5] = 10'b0000000000;
rom[9'h1d6] = 10'b0000000000;
rom[9'h1d7] = 10'b0000000000;
rom[9'h1d8] = 10'b0000000000;
rom[9'h1d9] = 10'b0000000000;
rom[9'h1da] = 10'b0000000000;
rom[9'h1db] = 10'b0000000000;
rom[9'h1dc] = 10'b0011110110;
rom[9'h1dd] = 10'b0000000000;
rom[9'h1de] = 10'b0000000000;
rom[9'h1df] = 10'b0000000000;
rom[9'h1e0] = 10'b0000000000;
rom[9'h1e1] = 10'b0000000000;
rom[9'h1e2] = 10'b0000000000;
rom[9'h1e3] = 10'b0000000000;
rom[9'h1e4] = 10'b0000000000;
rom[9'h1e5] = 10'b0000000000;
rom[9'h1e6] = 10'b0000000000;
rom[9'h1e7] = 10'b0000000000;
rom[9'h1e8] = 10'b0000000000;
rom[9'h1e9] = 10'b0000000000;
rom[9'h1ea] = 10'b0000000000;
rom[9'h1eb] = 10'b0000000000;
rom[9'h1ec] = 10'b0000000000;
rom[9'h1ed] = 10'b0000000000;
rom[9'h1ee] = 10'b0000000000;
rom[9'h1ef] = 10'b0000000000;
rom[9'h1f0] = 10'b0000000000;
rom[9'h1f1] = 10'b0000000000;
rom[9'h1f2] = 10'b0000000000;
rom[9'h1f3] = 10'b0000000000;
rom[9'h1f4] = 10'b0000000000;
rom[9'h1f5] = 10'b0000000000;
rom[9'h1f6] = 10'b0000000000;
rom[9'h1f7] = 10'b0000000000;
rom[9'h1f8] = 10'b0000000000;
rom[9'h1f9] = 10'b0000000000;
rom[9'h1fa] = 10'b0000000000;
rom[9'h1fb] = 10'b0000000000;
rom[9'h1fc] = 10'b0011111000;
rom[9'h1fd] = 10'b0000000000;
rom[9'h1fe] = 10'b0000000000;
rom[9'h1ff] = 10'b0000000000;
    end
    
    

    
    reg [1:0] state,next_state;
    reg ila_flag,indicator;
    reg [4:0] oct,octstate;
    reg [3:0] multiframe;
    reg [7:0] octet1,octet3;
    
    always@(*) begin
        case(state)
            WAIT: next_state=(!sync) ? CGS : WAIT;
            CGS: next_state=(sync) ? ILAS : CGS;
            ILAS: next_state=(multiframe == 4'd3 && sync) ? DATA : ILAS ;
            DATA: next_state=(sync) ? DATA : WAIT;
        endcase
    end
    
    //always@(posedge lmfc) begin
    //        state=next_state;
    //end
    
    always@(posedge fc or negedge rst) begin
      if(!rst) begin
        state<=WAIT;
        oct<=0;
        octstate<=5'd7;
        ila_flag<=0;
        multiframe<=0;
        octet1<=0;
        octet3<=0;
        indicator<=0;
      end else begin
      octstate<=octstate+1;
      if(octstate == 31) state<=next_state;
        case(state)
            WAIT: begin 
                    dl_data_out1<=10'b0;
                  end
            CGS: begin 
                    dl_data_out1<=rom[9'h1bc];  //K
                 end
            ILAS: begin
                   case(multiframe)
                     2'b00,2'b11,2'b10: case(oct)
                              5'd0,5'd1: begin 
                                            dl_data_out1=rom[9'h11c]; //R
                                         end
                              5'd30,5'd31: begin 
                                            dl_data_out1=rom[9'h17c];  //A
                                         end
                              default : begin 
                                            dl_data_out1<=rom[dl_data_in1];
                                         end
                            endcase
                     2'b01: case(oct)
                              5'd0,5'd1: dl_data_out1=rom[9'h11c];  //R
                              5'd2,5'd3: dl_data_out1=rom[9'h19c];  //Q
                              5'd4: dl_data_out1<=rom[{1'b0,DID}];
                              5'd5: dl_data_out1<=rom[{1'b0,ADJCNT,BID}];
                              5'd6: dl_data_out1<=rom[{2'b0,ADJDIR,PHADJ,LID}];
                              5'd7: dl_data_out1<=rom[{3'b00,SCR,L}];
                              5'd8: dl_data_out1<=rom[{1'b0,F}];
                              5'd9: dl_data_out1<=rom[{3'b000,K}];
                              5'd10: dl_data_out1<=rom[{1'b0,M}];
                              5'd11: dl_data_out1<=rom[{2'b0,CS,N}];
                              5'd12: dl_data_out1<=rom[{1'b0,SUBCLASS,N}];
                              5'd13: dl_data_out1<=rom[{1'b0,JESDV,S}];
                              5'd14: dl_data_out1<=rom[{3'b00,HD,CF}];
                              5'd15: dl_data_out1<=rom[9'h000];
                              5'd16: dl_data_out1<=rom[9'h000];
                              5'd17: dl_data_out1<=rom[{1'b0,FCHK}];
                              5'd30,5'd31: dl_data_out1=rom[9'h17c];  //A
                              default : dl_data_out1<=8'h01;
                            endcase
                   endcase
                   if(oct==31)  begin multiframe=multiframe+1;end
                  oct=oct+1;
                  if(multiframe==4) begin ila_flag=1'b1;multiframe=3'b0; end
                  end
            DATA: begin
                    ila_flag=0;
                    dl_data_out1=rom[dl_data_in1]; 
                    if(oct[0] == 1'b1 && oct != 5'h1f) begin
                       if(dl_data_in1 != 10'h1cf) octet1<=dl_data_in1;
                       if(octet1 == dl_data_in1) begin
                          dl_data_out1=rom[9'h1fc]; //F k28.7
                       end 
                         else dl_data_out1=rom[dl_data_in1];
                    end 
                    if (oct == 5'h1f) begin 
                      octet3<=dl_data_in1;
                      if(octet3== dl_data_in1) begin
                          dl_data_out1=rom[9'h17c]; //A k28.3
                          indicator=~indicator;
                       end
                    end 
                    
                    oct=oct+1;
                    
                  end
                  
        endcase

      end
    end
    
endmodule
